<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>노무사 학습 플래너</title>
</head>
<body>
    <div style="position: absolute; top: 10px; right: 10px; text-align: right;">
        <div><span id="authStatus">확인 중...</span></div>
        <div>
            <a href="login.html" id="loginLink">로그인</a>
            <button id="logoutBtn" style="display:none;">로그아웃</button>
        </div>
    </div>

    <h1>노무사 학습 플래너</h1>

    <hr>

    <h2>메뉴</h2>

    <ul>
        <li><a href="checklist.html">기출문제 회독 체크리스트</a></li>
    </ul>

    <hr>

    <p>공인노무사 1차 시험 학습을 위한 플래너입니다.</p>

    <script>
        // 로그인 상태 확인
        fetch('/api/auth/status')
            .then(function(response) { return response.json(); })
            .then(function(data) {
                if (data.loggedIn) {
                    document.getElementById('authStatus').textContent = '로그인됨: ' + data.username;
                    document.getElementById('loginLink').style.display = 'none';
                    document.getElementById('logoutBtn').style.display = 'inline';
                } else {
                    document.getElementById('authStatus').textContent = '로그인 안 됨 (읽기 전용)';
                }
            });

        // 로그아웃
        document.getElementById('logoutBtn').addEventListener('click', function() {
            fetch('/api/auth/logout', { method: 'POST' })
                .then(function(response) { return response.json(); })
                .then(function(data) {
                    if (data.success) {
                        location.reload();
                    }
                });
        });
    </script>

</body>
</html>
